{% extends "quizapp/quiz_base.html" %}


{% block content %}


    <div class="pull-right">
        <a href="{% url 'quizapp:quiz_take' quiz.id %}" class="btn btn-info btn-lg" role="button">Take this quiz</a>
        <a href="{% url 'quizapp:quiz_index' %}" class="btn btn-primary btn-lg" role="button">&laquo; Back to quizzes</a>
    </div>

    <div class="page-header">
        <h1>Edit Quiz</h1>
    </div>
    <div>
        <h3>{{ quiz }}</h3>
    </div>

      <div class="well">
        <p>Click a question or answer to edit.</p>
      </div>

    {% if formset|length > 5  %}
    <div>
        <a href="{% url 'quizapp:question_add' quiz.id %}" class="btn btn-info" role="button">Add a question</a>
        <a href="{% url 'quizapp:quiz_delete' quiz.id %}" class="btn btn-danger" role="button">Delete this quiz</a>
    </div>
    {% endif %}
    <br/>

    <form method="post" action="">
        {% csrf_token %}
        {{ formset.management_form }}

        {% if formset|length > 0  %}
            {% for form in formset %}
                {{ form.id }}
                <ul>
                    <li>
                        {# Widget display is too ugly #}
                        {# {% if formset.can_order %}{{ form.ORDER }}{% endif %}#}

                        <a href="{% url 'quizapp:question_manage' form.instance.pk %}">
                            {% if form.instance.text %}
                                {{form.instance.text}}
                            {% else %}
                                {{form.data.text}}
                            {% endif %}
                        </a>

                        {# Widget display is too ugly #}
                        {# {% if formset.can_delete %}{{ form.DELETE }}{% endif %} #}
                        <div>
                            <ul>
                                {% for answer in form.instance.answers %}
                                    <li>
                                        <a href="{% url 'quizapp:answer_manage' answer.pk %}">
                                            {{ answer.text }}
                                            {% if answer.correct %}
                                                (CORRECT)
                                            {% endif %}
                                        </a>
                                    </li>
                                {% endfor %}
                            </ul>
                        </div>
                    </li>
                </ul>
            {% endfor %}
        {% else %}
            <p>This quiz has no questions yet.</p>
        {% endif %}
    </form>

     <div>
        <a href="{% url 'quizapp:question_add' quiz.id %}" class="btn btn-info" role="button">Add a question</a>
        <a href="{% url 'quizapp:quiz_delete' quiz.id %}" class="btn btn-danger" role="button">Delete this quiz</a>
    </div>

    <br/>
    <div>
        <a href="{% url 'quizapp:quiz_take' quiz.id %}" class="btn btn-info btn-lg" role="button">Take this quiz</a>
        <a href="{% url 'quizapp:quiz_index' %}" class="btn btn-primary btn-lg" role="button">&laquo; Back to quizzes</a>
    </div>

{% endblock %}



